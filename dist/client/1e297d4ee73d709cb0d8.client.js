(()=>{var e={979:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{c(o.next(e))}catch(e){r(e)}}function s(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const s=r(n(99)),c=["a_m_m_fatlatin_01","a_m_m_socenlat_01","a_m_m_stlat_02","a_m_y_latino_01","a_m_y_stlat_01"],l="TAXI";RegisterCommand("taxi",(()=>a(void 0,void 0,void 0,(function*(){let e=0;const t=PlayerPedId();if(!t)return void s.errorMsg("Player not found");const[n,o,i]=GetEntityCoords(t,!0),r=GetFirstBlipInfoId(8);if(!r)return void s.errorMsg("No waypoint found");const[a,d]=GetBlipInfoIdCoord(r),u=GetHeightmapBottomZForPosition(a,d),[h,f]=yield s.generateVehicle(l,[n,o,i],GetEntityHeading(t),c[Math.floor(Math.random()*c.length)]),g=GetVehicleModelNumberOfSeats(l)-2;for(SetPedIntoVehicle(t,h,g),TaskVehicleDriveToCoordLongrange(f,h,a,d,u,22,787245,0);!s.hasVehicleArrivedAtDestination(h,[a,d,u])&&IsPedSittingInVehicle(t,h)&&IsPedSittingInVehicle(f,h);){const t=Math.max(11,GetEntitySpeed(h)),[n,o,i]=GetEntityCoords(h,!0),r=CalculateTravelDistanceBetweenPoints(a,d,u,n,o,i),c=r/t;e=c/60,console.log({vehicleSpeed:t,distanceRemaining:r,timeRemainingInSeconds:c,estimatedArrivalInMinutes:e}),yield s.Delay(500)}if(!IsPedSittingInVehicle(t,h))return s.infoMsg("Journey ended early - you left the vehicle"),SetVehicleAsNoLongerNeeded(h),void SetPedAsNoLongerNeeded(f);const y=s.getLocationFromCoords(a,d,u);s.successMsg(`You have arrived at ${y}.`),console.log("parking vehicle");const v=GetEntityHeading(h);for(TaskVehiclePark(f,h,a,d,u,v,0,20,!0);!IsVehicleStopped(h);)yield s.Delay(50);for(console.log("Player leaving vehicle"),TaskLeaveVehicle(t,h,0);!IsPedSittingInVehicle(t,h);)yield s.Delay(500);console.log("Setting Vehicle and Driver as no longer needed"),SetVehicleAsNoLongerNeeded(h),SetPedAsNoLongerNeeded(f)}))),!1)},99:function(e,t){"use strict";var n=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{c(o.next(e))}catch(e){r(e)}}function s(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))};function o(e){return n(this,void 0,void 0,(function*(){new Promise((t=>setTimeout(t,e)))}))}function i(e,t){const[n,o,i]=e,[r,a,s]=t;return Math.sqrt(Math.pow(n-r,2)+Math.pow(o-a,2)+Math.pow(i-s,2))}Object.defineProperty(t,"__esModule",{value:!0}),t.getLocationFromCoords=t.hasVehicleArrivedAtDestination=t.getDistance=t.generateVehicle=t.successMsg=t.infoMsg=t.errorMsg=t.Delay=void 0,t.Delay=o,t.errorMsg=function(e){emit("chat:addMessage",{args:["Error",e],color:[255,0,0]})},t.infoMsg=function(e){emit("chat:addMessage",{args:["Info",e],color:[0,255,255]})},t.successMsg=function(e){emit("chat:addMessage",{args:["Success",e],color:[0,255,0]})},AddRelationshipGroup("WSKY_TAXI_DRIVER"),SetRelationshipBetweenGroups(0,GetHashKey("WSKY_TAXI_DRIVER"),GetHashKey("PLAYER")),SetRelationshipBetweenGroups(0,GetHashKey("PLAYER"),GetHashKey("WSKY_TAXI_DRIVER")),t.generateVehicle=function(e,t,i,r){return n(this,void 0,void 0,(function*(){const[n,a,s]=t;for(RequestModel(e);!HasModelLoaded(e);)yield o(500);if(r)for(RequestModel(r);!HasModelLoaded(r);)yield o(500);const c=CreateVehicle(GetHashKey(e),n,a,s,i||0,!0,!0);let l=null;return r&&(l=CreatePedInsideVehicle(c,4,r,-1,!0,!0),SetPedRelationshipGroupHash(l,GetHashKey("WSKY_TAXI_DRIVER")),TaskSetBlockingOfNonTemporaryEvents(l,!0)),l?[c,l]:[c]}))},t.getDistance=i,t.hasVehicleArrivedAtDestination=function(e,t){return i(GetEntityCoords(e,!0),t)<=30},t.getLocationFromCoords=function(e,t,n){const o=GetNameOfZone(e,t,n),i=o?GetLabelText(o):null,[r]=GetStreetNameAtCoord(e,t,n),a=GetStreetNameFromHashKey(r);let s="your destination";return a&&(s=a),a&&i?s=`${a}, ${i}`:i&&(s=i),s}}},t={};!function n(o){var i=t[o];if(void 0!==i)return i.exports;var r=t[o]={exports:{}};return e[o].call(r.exports,r,r.exports,n),r.exports}(979)})();